\usepackage{graphicx}
\usepackage{graphics}
\usepackage{subfig}
\usepackage{verbatim}
\usepackage{latexsym}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathrsfs}
\usepackage{cancel}
\usepackage{gensymb}
\usepackage{bm}
\usepackage{authblk}
\usepackage{verbatim}
\usepackage{hhline}
\usepackage{booktabs}
% \usepackage{colortbl}
\DisemulatePackage{setspace}
\usepackage{setspace}
\usepackage[sort&compress, numbers, comma]{natbib}
\usepackage[]{appendix}
\usepackage[hyphens]{url}
\usepackage{hyperref}
\usepackage[table]{xcolor}
\usepackage{titlesec}
\usepackage{tikz}
\usepackage{upgreek}
\usepackage[compat=1.1.0]{tikz-feynman}
\usepackage{contour}
\usepackage{pgfplots}
\usepackage{tkz-euclide}
%\usetkzobj{all}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=3cm]{geometry}
\usepackage{etoolbox}
\usepackage{bigdelim}
\usepackage{rotating}
%\usepackage{xpatch}
%\makeatletter
%\xpatchcmd\@memb@bchap{\phantomsection}{}{}{\fail}
%\makeatother
\listfiles
\usetikzlibrary{calc,positioning,shadows.blur,decorations.pathreplacing,arrows,trees,decorations.pathmorphing,decorations.markings}
\usepackage{mathtools}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}%
\DeclarePairedDelimiter\norm{\lVert}{\rVert}%

% Swap the definition of \abs* and \norm*, so that \abs
% and \norm resizes the size of the brackets, and the 
% starred version does not.
\makeatletter
\let\oldabs\abs
\def\abs{\@ifstar{\oldabs}{\oldabs*}}
% 
\let\oldnorm\norm
\def\norm{\@ifstar{\oldnorm}{\oldnorm*}}
\makeatother

\graphicspath{{images/}}

\setlength{\arrayrulewidth}{0.3mm}

\DeclareMathOperator{\Tr}{Tr}

%\titleformat{\chapter}{\normalfont\huge}{\thechapter.}{20pt}{\huge\bf}
%\titleformat{\section}{\normalfont\Large}{\thesection.}{16pt}{\Large\it\bf}
%\titleformat{\subsection}{\normalfont\large}{\thesubsection.}{14pt}{\large\it\bf}
%\titleformat{\subsection}{\normalfont\large}{\thesubsection.}{12pt}{\large\bf}

\hypersetup{
    colorlinks,
    linkcolor={red!50!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
  }

  \tikzset{%
        brace/.style = { decorate, decoration={brace, amplitude=5pt} },
       mbrace/.style = { decorate, decoration={brace, amplitude=5pt, mirror} },
        label/.style = { black, midway, scale=0.5, align=center },
     toplabel/.style = { label, above=.5em, anchor=south },
    leftlabel/.style = { label,rotate=-90,left=.5em,anchor=north },   
  bottomlabel/.style = { label, below=.5em, anchor=north },
        force/.style = { rotate=-90,scale=0.4 },
        round/.style = { rounded corners=2mm },
       legend/.style = { right,scale=0.4 },
        nosep/.style = { inner sep=0pt },
   generation/.style = { anchor=base }
}

\tikzset{
  treenode/.style = {align=center, inner sep=0pt, text centered,
    font=\sffamily},
  arn_n/.style = {treenode, circle, white, font=\sffamily\bfseries, draw=black,
    fill=black, text width=2em},% arbre rouge noir, noeud noir
  arn_r/.style = {treenode, circle, red, draw=red, 
    text width=2em, very thick},% arbre rouge noir, noeud rouge
  arn_b/.style = {treenode, circle, blue, draw=blue, 
    text width=2em, very thick},% arbre rouge noir, noeud rouge
  arn_x/.style = {treenode, rectangle, draw=black,
    minimum width=0.5em, minimum height=0.5em}% arbre rouge noir, nil
}


\newcommand\particle[7][white]{%
  \begin{tikzpicture}[x=1cm, y=1cm]
    \path[fill=#1,blur shadow={shadow blur steps=5}] (0.1,0) -- (0.9,0)
        arc (90:0:1mm) -- (1.0,-0.9) arc (0:-90:1mm) -- (0.1,-1.0)
        arc (-90:-180:1mm) -- (0,-0.1) arc(180:90:1mm) -- cycle;
    \ifstrempty{#7}{}{\path[fill=purple!50!white]
        (0.6,0) --(0.7,0) -- (1.0,-0.3) -- (1.0,-0.4);}
    \ifstrempty{#6}{}{\path[fill=green!50!black!50] (0.7,0) -- (0.9,0)
        arc (90:0:1mm) -- (1.0,-0.3);}
    \ifstrempty{#5}{}{\path[fill=orange!50!white] (1.0,-0.7) -- (1.0,-0.9)
        arc (0:-90:1mm) -- (0.7,-1.0);}
    \draw[\ifstrempty{#2}{dashed}{black}] (0.1,0) -- (0.9,0)
        arc (90:0:1mm) -- (1.0,-0.9) arc (0:-90:1mm) -- (0.1,-1.0)
        arc (-90:-180:1mm) -- (0,-0.1) arc(180:90:1mm) -- cycle;
    \ifstrempty{#7}{}{\node at(0.825,-0.175) [rotate=-45,scale=0.2] {#7};}
    \ifstrempty{#6}{}{\node at(0.9,-0.1)  [nosep,scale=0.17] {#6};}
    \ifstrempty{#5}{}{\node at(0.9,-0.9)  [nosep,scale=0.2] {#5};}
    \ifstrempty{#4}{}{\node at(0.1,-0.1)  [nosep,anchor=west,scale=0.25]{#4};}
    \ifstrempty{#3}{}{\node at(0.1,-0.85) [nosep,anchor=west,scale=0.3] {#3};}
    \ifstrempty{#2}{}{\node at(0.1,-0.5)  [nosep,anchor=west,scale=1.5] {#2};}
  \end{tikzpicture}
}

%\tikzset{/tikzfeynman/warn luatex=false, /tikzfeynman/warn all=false}

%\tikzset{%
%  every neuron/.style={
%    circle,
%    minimum size=22pt,
%    draw
%  },
%  neuron missing/.style={
%    draw=none, 
%    scale=3,
%    text height=0.3cm,
%    execute at end node=\color{black}\tiny{$\vdots$}
%  },
%}

%\tikzset{
%  photon/.style={decorate, decoration={snake}, draw=black},
%  higgs/.style={draw=black, style=dashed},
%  fermion/.style={draw=black, postaction={decorate},
%    decoration={markings,mark=at position .55 with {\arrow[draw=black]{>}}}},
%  anti-fermion/.style={draw=black, postaction={decorate},
%    decoration={markings,mark=at position .55 with {\arrow[draw=black]{<}}}}}

\pgfplotsset{compat=1.14}

\pgfdeclarefunctionalshading{sphere}{\pgfpoint{-25bp}{-25bp}}{\pgfpoint{25bp}{25bp}}{}{
%% calculate unit coordinates
25 div exch
25 div exch
%% copy stack
2 copy 
%% compute -z^2 of the current position 
dup mul exch
dup mul add
1.0 sub
%% and the -z^2 of the light source 
0.3 dup mul
-0.5 dup mul add
1.0 sub
%% now their sqrt product
mul abs sqrt
%% and the sum product of the rest
exch 0.3 mul add
exch -0.5 mul add
%% max(dotprod,0)
dup abs add 2.0 div 
%% matte-ify
0.6 mul 0.4 add
%% currently there is just one number in the stack.
%% we need three corresponding to the RGB values
dup
0.4
}

\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

%\input{template/blocked.sty}
%\input{template/uhead.sty}
%\input{template/boxit.sty}
\input{template/tctemplate.sty}

%\newcommand{\ipc}{{\sf ipc}}

%\newcommand{\Prob}{\bbbp}
%\newcommand{\Real}{\bbbr}
%\newcommand{\real}{\Real}
%\newcommand{\Int}{\bbbz}
%\newcommand{\Nat}{\bbbn}

%\newcommand{\NN}{{\sf I\kern-0.14emN}}   % Natural numbers
%\newcommand{\ZZ}{{\sf Z\kern-0.45emZ}}   % Integers
%\newcommand{\QQQ}{{\sf C\kern-0.48emQ}}   % Rational numbers
%\newcommand{\RR}{{\sf I\kern-0.14emR}}   % Real numbers
%\newcommand{\KK}{{\cal K}}
%\newcommand{\OO}{{\cal O}}
%\newcommand{\AAA}{{\bf A}}
%\newcommand{\HH}{{\bf H}}
%\newcommand{\II}{{\bf I}}
%\newcommand{\LL}{{\bf L}}
%\newcommand{\PP}{{\bf P}}
%\newcommand{\PPprime}{{\bf P'}}
%\newcommand{\QQ}{{\bf Q}}
%\newcommand{\UU}{{\bf U}}
%\newcommand{\UUprime}{{\bf U'}}
%\newcommand{\zzero}{{\bf 0}}
%\newcommand{\ppi}{\mbox{\boldmath $\pi$}}
%\newcommand{\aalph}{\mbox{\boldmath $\alpha$}}
%\newcommand{\bb}{{\bf b}}
%\newcommand{\ee}{{\bf e}}
%\newcommand{\mmu}{\mbox{\boldmath $\mu$}}
%\newcommand{\vv}{{\bf v}}
%\newcommand{\xx}{{\bf x}}
%\newcommand{\yy}{{\bf y}}
%\newcommand{\zz}{{\bf z}}
%\newcommand{\oomeg}{\mbox{\boldmath $\omega$}}
%\newcommand{\res}{{\bf res}}
%\newcommand{\cchi}{{\mbox{\raisebox{.4ex}{$\chi$}}}}
%\newcommand{\cchi}{{\cal X}}
%\newcommand{\cchi}{\mbox{\Large $\chi$}}

% Logical operators and symbols
%\newcommand{\imply}{\Rightarrow}
%\newcommand{\bimply}{\Leftrightarrow}
%\newcommand{\union}{\cup}
%\newcommand{\intersect}{\cap}
%\newcommand{\boolor}{\vee}
%\newcommand{\booland}{\wedge}
%\newcommand{\boolimply}{\imply}
%\newcommand{\boolbimply}{\bimply}
%\newcommand{\boolnot}{\neg}
%\newcommand{\boolsat}{\!\models}
%\newcommand{\boolnsat}{\!\not\models}


%\newcommand{\op}[1]{\mathrm{#1}}
%\newcommand{\s}[1]{\ensuremath{\mathcal #1}}

% Properly styled differentiation and integration operators
%\newcommand{\diff}[1]{\mathrm{\frac{d}{d\mathit{#1}}}}
%\newcommand{\diffII}[1]{\mathrm{\frac{d^2}{d\mathit{#1}^2}}}
%\newcommand{\intg}[4]{\int_{#3}^{#4} #1 \, \mathrm{d}#2}
%\newcommand{\intgd}[4]{\int\!\!\!\!\int_{#4} #1 \, \mathrm{d}#2 \, \mathrm{d}#3}

% Large () brackets on different lines of an eqnarray environment
%\newcommand{\Leftbrace}[1]{\left(\raisebox{0mm}[#1][#1]{}\right.}
%\newcommand{\Rightbrace}[1]{\left.\raisebox{0mm}[#1][#1]{}\right)}

% Funky symobols for footnotes
%\newcommand{\symbolfootnote}{\renewcommand{\thefootnote}{\fnsymbol{footnote}}}
% now add \symbolfootnote to the beginning of the document...

\newcommand{\normallinespacing}{\renewcommand{\baselinestretch}{1.5} \normalsize}
%\newcommand{\mediumlinespacing}{\renewcommand{\baselinestretch}{1.2} \normalsize}
%\newcommand{\narrowlinespacing}{\renewcommand{\baselinestretch}{1.0} \normalsize}
%\newcommand{\bump}{\noalign{\vspace*{\doublerulesep}}}
%\newcommand{\cell}{\multicolumn{1}{}{}}
%\newcommand{\spann}{\mbox{span}}
%\newcommand{\diagg}{\mbox{diag}}
%\newcommand{\modd}{\mbox{mod}}
%\newcommand{\minn}{\mbox{min}}
%\newcommand{\andd}{\mbox{and}}
%\newcommand{\forr}{\mbox{for}}
%\newcommand{\EE}{\mbox{E}}

%\newcommand{\deff}{\stackrel{\mathrm{def}}{=}}
%\newcommand{\syncc}{~\stackrel{\textstyle \rhd\kern-0.57em\lhd}{\scriptstyle L}~}

%\def\coop{\mbox{\large $\rhd\!\!\!\lhd$}}
%\newcommand{\sync}[1]{\raisebox{-1.0ex}{$\;\stackrel{\coop}{\scriptscriptstyle
%#1}\,$}}

%\newtheorem{definition}{Definition}[chapter]
%\newtheorem{theorem}{Theorem}[chapter]

%\newcommand{\Figref}[1]{Figure~\ref{#1}}
%\newcommand{\fig}[3]{
% \begin{figure}[!ht]
% \begin{center}
% \scalebox{#3}{\includegraphics{figs/#1.ps}}
% \vspace{-0.1in}
% \caption[ ]{\label{#1} #2}
% \end{center}
% \end{figure}
%}

%\newcommand{\figtwo}[8]{
% \begin{figure}
% \parbox[b]{#4 \textwidth}{
% \begin{center}
% \scalebox{#3}{\includegraphics{figs/#1.ps}}
% \vspace{-0.1in}
% \caption{\label{#1}#2}
% \end{center}
% }
% \hfill
% \parbox[b]{#8 \textwidth}{
% \begin{center}
% \scalebox{#7}{\includegraphics{figs/#5.ps}}
% \vspace{-0.1in}
% \caption{\label{#5}#6}
% \end{center}
% }
% \end{figure}
%}
